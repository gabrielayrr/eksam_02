---
// @ts-nocheck
import "../../styles/global.css";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import Kagemenu from "../../components/Kagemenu.astro";
import Dropdownbutton from "../../components/Dropdownbutton.astro";
import Cherrybutton from "../../components/Cherrybutton.astro";

import Addtoorder from "../../components/Addtoorder.astro";
const Størrelse = ['Vælg', '30 Pers - 1 Etage', '30 Pers - 2 Etage', '40 Pers - 2 Etage'];
const Smag = ['Vælg', 'Tripple Chocolate', 'Vanilje Blåbærkage Med Passionscreme', 'Chockoladekage med hindbærcreme'];
let count = 0;


export async function getStaticPaths() {
  const data = await fetch(
    "https://lenxgabyeauokwywovdn.supabase.co/rest/v1/Bryllup",
    {
      method: "GET",
      headers: {
        apikey:
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlbnhnYWJ5ZWF1b2t3eXdvdmRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM5MTc2MTksImV4cCI6MjA0OTQ5MzYxOX0.DuRoO_qLOHFUY-JsNcTAOzxDEHObSpKf47BEpclRKnQ",
      },
    }
  ).then((reponse) => reponse.json());

  return data.map((artist) => {
    return {
      params: { slug: artist.slug },
      props: { data: artist }, // FIXED: Changed `myArtist` to `data`
    };
  });
}

const { data } = Astro.props; // FIXED: Changed `myData` to `data`
console.log(data);
---

<html lang="da">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <link rel="stylesheet" href="/styles/global.css"/>
    <link rel="stylesheet" href="https://use.typekit.net/dum4mjv.css">
    <link rel="stylesheet" href="https://use.typekit.net/dum4mjv.css">
    <title>Bake My Day</title>
  </head>
  <body>
    <header>
      <Header />
    </header>
    <main>
      <Kagemenu />

      <section class="singleview" >

          <div class="titelsinglev">
          <h3>{data.ktext1}</h3>
          <h5>{data.ktext2}</h5>
          </div>
          <div class="singlevcards">
          <div class="singlevcard">
          <img class="bigsinglevimg" src={`/images/${data.Img}`} alt={data.Img}>
          </div>
          <div class="minicards">
          <div class="minicard">
          <img class="smallsinglevimg1" src={`/images/${data.Img}`} alt={data.Img}>
          </div>
          <div class="minicard">
          <img class="smallsinglevimg2" src={`/images/${data.Img}`} alt={data.Img}>
          </div>
          </div>
          </div>

          <div class="text-singlev" id="textSinglev">
          <p class="text" id="text">
           Vores Festkage med pressede blomster er en æstetisk fornøjelse, der forener naturens skønhed med en lækker smagsoplevelse. Kagen er omhyggeligt dekoreret med nøje udvalgte pressede blomster, der tilføjer en unik og naturlig elegance til enhver festlig lejlighed.
          <span class="dots">... Read more</span>
           <span class="more-text"> Vores dedikerede konditorer smører kagen op med en skøn vaniljesmørcreme, der skaber den perfekte base for både udseende og smag.

            Bemærk venligst, at på grund af blomsternes naturlige variation kan udseendet af blomsterdekorationen variere fra kage til kage. Dette bidrager til hver kages unikke karakter og skaber en autentisk følelse af håndværk og individualitet,men de kommer altid til at have det lidt mere "vilde" look.

            Uanset om det er til en fødselsdag, bryllup eller enhver anden festlig lejlighed, vil vores Festkage med pressede blomster være et smukt og velsmagende centrum for din begivenhed.Vegan info: Alle smage undtaget Red velvet kan laves vegansk/plantebaseret. Husk at skrive i kommentarfeltet i næste skridt hvis kagen ønskes vegansk.

            Bestillingsfrist: Minimum 7 dage (Ring og spørg os først, hvis der er mindre end 7 dage)
  </p>
</div> 
          

<div class="optionsWrapper">
      <!-- DROPDOWN -->
  <div class="opplyssinglev">   
     <h5>Størrelse</h5>
      <!-- Dropdown for Størrelse -->
     <Dropdownbutton options={Størrelse} />
      <h5>Smag</h5>
     <!-- Dropdown for Smag -->
      <Dropdownbutton options={Smag} />

     <!-- ANTAL OF CAKES -->
     <h5>Antal</h5>
     <div class="counter-container">
      <span class="counter-button" id="decrement">-</span>
      <span id="counter">0</span>
      <span class="counter-button" id="increment">+</span>
    </div>
  </div>
          <div class="btnsinglev">
          <Cherrybutton class="cherrybutton" text="TILFØJ TIL KURV"></Cherrybutton>

        
    </div>
</div>

<!-- EXTRA INFO -->
<div class="extraInformationWrapper">
    <h5> & Allergier</h5>

<div class="icon-row">
    <div class="icon-text">
      <img src="/images/vegan.webp" alt="Icon 1">
      <p>Vegan</p>
    </div>
    <div class="icon-text">
      <img src="/images/egg.webp" alt="Icon 2">
      <p>Ægg</p>
    </div>
    <div class="icon-text">
      <img src="/images/milk-bottle.webp" alt="Icon 3">
     <p>Mælk</p>
    </div>
    <div class="icon-text">
      <img src="/images/wheat.webp" alt="Icon 4">
      <p>Wheat</p>
</div>
</div>

    <!-- ADD TO ORDER -->
<div class="addons">

  <div class="addoncrd" >
    <Addtoorder
     src="/images/candles.webp"
     name="Stearinlys"
    price="25 dkk"
   />
  <Cherrybutton class="cherrybutton" text="TILFØJ"></Cherrybutton>
   </div>

   <div class="addoncrd">
       <Addtoorder
     src="/images/cardaddon.webp"
     name="Kort"
    price="25 dkk"
    />
    <Cherrybutton class="cherrybutton" text="TILFØJ"></Cherrybutton>
    </div>
    
    <div class="addoncrd">
     <Addtoorder
     src="/images/sprinkles.webp"
     name="Sprikles"
    price="30 dkk"
    />  
    <Cherrybutton class="cherrybutton" text="TILFØJ"></Cherrybutton>
</div>
    </div>
</div>
         
          
    </section>
  <style>


/* CARDS */

  /* Cards layout */
.singleview{
  margin-top: 3rem;
  display: flex;
    row-gap: 1rem;
    flex-direction: column;
    align-items: center;
        row-gap: 2rem;
}

.singlevcards{
   display: flex;
   gap: 2rem;
   flex-direction: column;
}

.minicards{
display: flex;
column-gap: 1rem;

}

/* Making images on cards the right size */
.bigsinglevimg{
   width: 100%;
    height: 100%;
    object-fit: contain;
}

.smallsinglevimg1{
 width: 100%;
    height: 100%;
    object-fit: contain;

}

.smallsinglevimg2{
 width: 100%;
    height: 100%;
    object-fit: contain;

}

/* Cards background */
.singlevcard{
  width: 257px;
height: 305px;
border-radius: 19px;
background: rgba(195, 228, 221, 0.57);
}

.minicard{
  width: 67px;
height: 73px;
border-radius: 10px;
background: rgba(195, 228, 221, 0.57);
}


/*TEXT STYLEING */
.text-singlev {
  max-width: 600px;
  cursor: pointer; 
  text-align: justify;
  display: grid;
  align-self: start;
  margin-top: 3rem;
  
}
.dots {
  color: #555;
}

.more-text {
  display: none; 
}


    /* COUNTER STYLING */
  .counter-button{
cursor: pointer; 
        user-select: none; 
  }
.counter-container{
display: flex;
    gap: 2rem;
    font-size: 1.3rem;
}

 .icon-row {
      display: flex;
      gap: 20px; 
      
    }

    .icon-text {
      display: flex;
      align-items: center;
      gap: 10px; /* Space between icon and text */
    }

    .icon-text img {
      width: 50px; /* Adjust the size of the icon */
      height: 50px;
      object-fit: cover;
    }
.btnsinglev{
  display: flex;
    flex-direction: column;
    gap: 0.7rem;
        margin-top: 3rem;
}

    /* ADD ONS STYLING */
.addons{
  display: flex;
  gap: 2rem;
    margin-top: 3rem;
}

/* DESKTOP STYLEING */
@media (min-width: 768px) {
   .singleview {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(3, auto); /* Add an extra row for stacking */
        grid-column-gap: 0px;
        grid-row-gap: 0px;
    }

    .titelsinglev {
      grid-area: 1 / 2 / 2 / 3;
      align-self: start; 
    }
   .singlevcards {
        grid-area: 1 / 1 / 3 / 2;
            margin-left: 6rem;
    }
     .singleview .text {
      grid-area: 3 / 1 / 4 / 2;    
  }
    .optionsWrapper {
       grid-area: 2 / 2 / 3 / 3;
       align-self: start;
    }

    .extraInformationWrapper {
        grid-area: 3 / 2 / 4 / 3; 
        margin-top: 3rem;
    }
    .singlevcard{
      width: 75%;
    height: 100%;
    }
  }
  </style>
    </main>
    <footer>
      <Footer />
    </footer>
  </body>
   <script>

//  THE JAVASCRIPT FOR TEXT SMALLER AND THEN BIGGER

document.getElementById("textSinglev")?.addEventListener("click", function () {
  const dots = document.querySelector(".dots") as HTMLElement;
  const moreText = document.querySelector(".more-text") as HTMLElement;

  if (moreText.style.display === "none" || !moreText.style.display) {
    dots.style.display = "none"; // Hiding the dots
    moreText.style.display = "inline"; // Show the hidden text
  } else {
    dots.style.display = "inline"; // Show the dots
    moreText.style.display = "none"; // Hide the additional text
  }
});

// JAVASCRIPT FOR COUNTER CONTAINER
    
  document.addEventListener("DOMContentLoaded", () => {
        // getting the DOM elements
        const decrementBtn = document.getElementById("decrement");
        const incrementBtn = document.getElementById("increment");
        const counterDisplay = document.getElementById("counter");

        // Checking if elements exist to avoid null errors
        if (decrementBtn && incrementBtn && counterDisplay) {
          let count = 0; // Initialize the counter

          // Decrement Button Click Event
          decrementBtn.addEventListener("click", () => {
            count -= 1;
            counterDisplay.textContent = count.toString(); // Convert number to string
          });

          // Increment Button Click Event
          incrementBtn.addEventListener("click", () => {
            count += 1;
            counterDisplay.textContent = count.toString(); // Convert number to string
          });
        } else {
          console.error("One or more DOM elements are missing.");
        }
      });
</script>


</html>
